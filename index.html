<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Diet√©tica Axel y Javi" />
    <meta property="og:description" content="üõµ Te llevamos el pedido a tu casa" />
    <meta property="og:image" content="https://dieteticaaxelyjavi.github.io/img/logo.png" />
    <meta property="og:url" content="https://dieteticaaxelyjavi.github.io/" />
    <meta property="og:type" content="website" />
    <title>Diet√©tica Axel y Javi</title>
    <link rel="icon" type="image/png" href="img/almendras.png"/>
    <link rel="stylesheet" href="css/estilos.css">
</head>
<body>

<!-- Encabezado con logo -->
<header class="header">
    <img src="img/logo.png" alt="Logo de la Diet√©tica Axel y Javi" class="logo">
</header>

<!-- Filtro de b√∫squeda -->
<div class="filter-container">
    <div class="filter-input-wrapper">
        <input type="text" id="filter-input" placeholder="Buscar..." autocomplete="off">
        <span id="clear-filter">&times;</span>
    </div>

    <div class="tags-container" id="tags-container"></div>
</div>

<!-- Lista de productos -->
<ul class="productos-lista"></ul>

<!-- Bot√≥n flotante de WhatsApp -->
<a href="https://api.whatsapp.com/send/?phone=5491133417868" class="fab" target="_blank"
   aria-label="Enviar mensaje por WhatsApp">
    <img src="img/whatsapp.png" alt="Icono de WhatsApp">
</a>

<!-- Scripts -->
<script src="js/main.js"></script>

<script>
document.addEventListener("contextmenu", function(e){
  e.preventDefault();
}, false);
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
    cargarEtiquetasDesdeCSV();
});

async function cargarEtiquetasDesdeCSV() {
    const urlCSV = 'https://raw.githubusercontent.com/dieteticaaxelyjavi/productos/main/etiquetas';
    try {
        const respuesta = await fetch(urlCSV);
        const texto = await respuesta.text();

        const lineas = texto.trim().split('\n');
        const etiquetas = lineas.map(l => l.trim());

        const contenedor = document.getElementById('tags-container');
        contenedor.innerHTML = '';

        etiquetas.forEach(etiqueta => {
            const boton = document.createElement('button');
            boton.className = 'tag';
            boton.textContent = etiqueta;
            contenedor.appendChild(boton);
        });

        inicializarEventosTags();

    } catch (error) {
        console.error('Error al cargar las etiquetas:', error);
    }
}

function inicializarEventosTags() {
    const tagsContainer = document.querySelector('.tags-container');
    const allTags = Array.from(tagsContainer.querySelectorAll('.tag'));

    const toggleBtn = document.createElement('button');
    toggleBtn.className = 'tag toggle-tag';
    toggleBtn.textContent = '+';
    toggleBtn.id = 'toggle-tags';

    if (!document.getElementById('toggle-tags')) {
        tagsContainer.appendChild(toggleBtn);
    }

    const visibles = allTags.slice(0, 7);
    const ocultos = allTags.slice(4);

    ocultos.forEach(tag => tag.style.display = 'none');

    toggleBtn.addEventListener('click', () => {
        const ocultosVisibles = ocultos[0].style.display === 'none';
        ocultos.forEach(tag => tag.style.display = ocultosVisibles ? 'inline-block' : 'none');
        toggleBtn.textContent = ocultosVisibles ? '-' : '+';
    });

    allTags.forEach(tag => {
        if (tag.id !== 'toggle-tags') {
            tag.addEventListener('click', () => {
                const inputFiltro = document.getElementById('filter-input');
                if (inputFiltro.value === tag.textContent) {
                    inputFiltro.value = '';
                } else {
                    inputFiltro.value = tag.textContent;
                }
                filtrarProductos();

                if (ocultos[0].style.display !== 'none') {
                    const ocultosVisibles = ocultos[0].style.display === 'none';
                    ocultos.forEach(tag => tag.style.display = ocultosVisibles ? 'inline-block' : 'none');
                    toggleBtn.textContent = ocultosVisibles ? '-' : '+';
                }
            });
        }
    });
}
</script>

</body>
</html>
