/* === FUENTES PERSONALIZADAS === */
@font-face {
  font-family: 'Lexend';
  src: url('fonts/Lexend-Regular.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

/* === VARIABLES GLOBALES === */
:root {
    /* Colores base */
    --color-blanco: white;
    --color-fondo: #fefdf9;

    /* Escala de grises (ordenados de oscuro a claro) */
    --color-casi-negro: #222;
    --color-negro-oliva: #333;
    --color-secundario: #555;
    --color-gris-clarito: #777;
    --color-gris-clarito-whatsapp: #f6f5f3;
    --color-gris-mas-clarito: #ccc;
    --color-gris-muy-clarito: #ddd;
    --color-gris-muy-muy-clarito: #eee;

    /* Colores semánticos */
    --color-azul-francia: #0056b3;
    --color-rojo-ofertas: #ff4444;
    --color-verde-carrito: #1dab61;
}

/* === ESTILOS GENERALES === */
body {
    font-family: 'Lexend', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--color-fondo);
    user-select: none; /* Evita selección de texto en la interfaz táctil */
}

/* === HEADER === */
.header {
    text-align: center;
    padding: 0;
    background-color: var(--color-fondo);
    border-bottom: 1px solid var(--color-gris-muy-clarito);
}

/* === LOGO === */
/* Estilos para el logotipo de la aplicación */
.logo {
    width: 130px;
    height: auto;
    display: block;
    margin: 0 auto;
    padding: 10px;
}

/* === FILTRO DE BÚSQUEDA === */
.filter-container {
    padding: 10px 10px 0 10px;
    background: var(--color-fondo);
    border-bottom: 1px solid var(--color-gris-muy-clarito);
    position: sticky;
    top: 0;
    z-index: 1000; /* Asegura que esté por encima de otros elementos */
}

/* Contenedor del input de búsqueda */
.filter-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
}

/* Campo de entrada de búsqueda */
.filter-input-wrapper input {
    width: 100%;
    padding: 10px 40px 10px 10px; /* Espacio a la derecha para la cruz */
    font-size: 0.85em;
    border: 1px solid var(--color-gris-mas-clarito);
    border-radius: 5px;
    font-family: 'Lexend', Arial, sans-serif;
}

/* Botón para limpiar el campo de búsqueda */
#clear-filter {
    position: absolute;
    padding: 15px 10px 15px 20px;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.2em;
    color: var(--color-gris-clarito);
    cursor: pointer;
    display: none; /* Oculto por defecto */
    user-select: none; /* Evita selección accidental */
}

/* === AUTOCOMPLETE SUGERENCIAS === */
.autocomplete-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid var(--color-gris-mas-clarito);
    border-top: none;
    border-radius: 0 0 5px 5px;
    max-height: 200px;
    overflow-y: auto;
    z-index: 1001;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.suggestion-item {
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid var(--color-gris-muy-muy-clarito);
    font-size: 0.85em;
}

.suggestion-item:hover {
    background-color: var(--color-gris-muy-muy-clarito);
}

.suggestion-item:last-child {
    border-bottom: none;
}

/* === TAGS === */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 6.5px;
    padding: 10px 0; /* Simplificado de 10px 0 10px 0 */
    line-height: 1.5em;
    max-height: calc(3em + 19px); /* 2 líneas (1.5em cada una) + padding */
    overflow: hidden;
    transition: max-height 0.3s ease;
    align-content: flex-start; /* Alinear líneas arriba */
}

/* Estado expandido del contenedor de etiquetas */
.tags-container.expandido {
    max-height: none;
}

/* Estilos base para cada etiqueta individual */
.tag {
    background-color: var(--color-gris-muy-muy-clarito);
    color: var(--color-negro-oliva);
    font-size: 0.8em;
    border: 1px solid var(--color-gris-mas-clarito);
    border-radius: 15px;
    padding: 5px 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Lexend', sans-serif;
    display: inline-block;
    font-weight: normal;
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* === TAGS SELECCIONADOS === */
.tag.selected {
    background: linear-gradient(45deg, 
                    #4834d4 0%, 
                    #3498db 70%,  
                    #00d2ff 100%);
    color: var(--color-blanco);
    border: none;
    font-weight: 500;
}

.tag.selected:hover {
    background: linear-gradient(45deg, 
                    #4834d4 0%, 
                    #3498db 70%,  
                    #00d2ff 100%);
    transform: translateY(-1px);
}

/* === PRODUCTOS === */
.productos-lista {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* Elemento individual de producto */
.producto-item {
    display: flex;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid var(--color-gris-muy-clarito);
    background: var(--color-fondo);
    position: relative;
}

/* Contenedor de la miniatura del producto */
.producto-thumbnail {
    position: relative;
    margin-right: 10px;
    flex-shrink: 0;
    width: 90px;
    height: 90px;
    cursor: pointer; /* Asegurar que la imagen del producto sea clickeable */
}

/* Imagen de la miniatura del producto */
.producto-thumbnail img {
    height: 100%;
    width: 100%;
    object-fit: cover;
    border-radius: 15px;
    display: block;
}

/* === OVERLAY DE IMAGEN A PANTALLA COMPLETA === */
/* Fondo oscuro para visualización de imagen completa */
.image-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Estado activo del overlay */
.image-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Imagen dentro del overlay */
.image-overlay img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    cursor: default;
    border-radius: 15px; /* Mismo radio que las miniaturas */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); /* Sutil sombra para mejor contraste */
}

/* === BOTÓN DE CERRAR OVERLAY === */
.close-button {
    position: fixed;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    z-index: 2001;
    transition: background-color 0.3s ease;
    border: none;
}

/* Creación de icono "X" con pseudo-elementos */
.close-button::before, .close-button::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 2px;
    background-color: white;
}

.close-button::before {
    transform: rotate(45deg);
}

.close-button::after {
    transform: rotate(-45deg);
}

/* Contenedor de información del producto */
.producto-contenido {
    position: relative;
    max-height: 1000px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 80px;
    gap: 7px;
    width: calc(100% - 110px);
}

/* Etiqueta de oferta en producto */
.oferta-label {
    position: absolute;
    top: 4px;
    left: -5px;
    background-color: var(--color-rojo-ofertas);
    color: var(--color-blanco);
    font-weight: bold;
    font-size: 0.5em;
    padding: 2.5px 4px;
    border-radius: 2px;
    z-index: 2; /* Para que aparezca sobre la imagen */
    opacity: 85%;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

/* Título del producto */
.producto-titulo {
    margin: 0;
    margin-bottom: 0px;
    font-size: 0.85em;
    line-height: 1.2;
    color: var(--color-casi-negro);
    font-weight: bold;
}

/* Logo sin TACC en línea con texto */
.logo-sin-tacc-inline {
    width: 15px;
    margin-left: 3px;
    margin-bottom: 0px;
    vertical-align: text-bottom;
    opacity: 100%;
}

/* Logo orgánico en línea con texto */
.logo-organico-inline {
    width: 15px;
    margin-left: 3px;
    vertical-align: text-bottom;
}

/* Descripción del producto */
.producto-descripcion {
    font-size: 0.85em;
    color: var(--color-gris-clarito);
    margin: 0px;
    margin-right: 15px;
    line-height: 1.2;
}

/* Precio del producto */
.producto-precio {
    font-size: 0.85em;
    color: var(--color-casi-negro);
    margin: 0px 0 0 0;
    line-height: 1.2;
}

/* Unidad de medida del producto */
.producto-unidad {
    font-size: 0.85em;
    margin-left: 5px;
    line-height: 1;
    color: var(--color-secundario);
}

/* Etiquetas ocultas del producto (usadas para filtrado) */
.producto-tags {
    display: none;
}

/* === PRODUCTOS SIN STOCK === */
/* Estado de producto sin stock */
.producto-item.sin-stock {
    position: relative;
    opacity: 0.6;
    overflow: hidden;
}

.producto-item.sin-stock .boton-agregar {
    display: none;
}

/* Patrón visual para productos sin stock */
.producto-item.sin-stock::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 100%,
        rgba(255,255,255,0.5) 100%,
        rgba(255,255,255,0.5) 100%
    );
    background-size: 100% 4px;
    z-index: 2;
    pointer-events: none;
}

/* Texto repetitivo indicando "SIN STOCK" */
.producto-item.sin-stock::after {
    content: "SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK   SIN STOCK";
    position: absolute;
    top: 50%;
    left: 1%;
    width: 100%;
    transform: translateY(-50%);
    white-space: nowrap;
    color: rgba(255, 0, 0, 0.2);
    font-size: 1em;
    font-weight: bold;
    z-index: 1;
    text-align: center;
    pointer-events: none;
    letter-spacing: 1px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.15);
}

/* Efecto en imagen para productos sin stock */
.producto-item.sin-stock .producto-thumbnail img {
    filter: grayscale(100%) brightness(1.1);
}

/* Estilos de texto para productos sin stock */
.producto-item.sin-stock .producto-titulo,
.producto-item.sin-stock .producto-descripcion,
.producto-item.sin-stock .producto-precio {
    color: var(--color-gris-clarito);
    position: relative;
    z-index: 3; /* Para que el texto del producto quede sobre el fondo */
}

/* === SOLUCIÓN PARA SAFARI (IPHONE) === */
/* Hack Safari iOS: añade padding extra para evitar corte de las últimas tags */
@supports (-webkit-touch-callout: none) {
  .tags-container {
    padding-bottom: 20px !important; /* 10px normal + 10px extra para Safari */
  }
  
  .tags-container.expandido {
    padding-bottom: 10px !important; /* Volver al valor normal cuando está expandido */
  }
}

/* === CARRITO DE COMPRAS === */
.carrito-flotante {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 70px;
    height: 70px;
    background-color: var(--color-blanco);
    border-radius: 50%;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.carrito-flotante:hover {
    transform: translateX(-50%) scale(1.05);
}

.carrito-flotante img {
    width: 40px;
    height: 40px;
}

.contador-carrito {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--color-verde-carrito);
    color: white;
    border-radius: 50%;
    width: 25px;
    height: 25px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 0.8em;
    font-weight: bold;
}

.panel-carrito {
    position: fixed;
    top: 0;
    right: -400px;
    width: 350px;
    height: 100%;
    background-color: var(--color-fondo);
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);
    z-index: 1001;
    transition: right 0.3s ease;
    display: flex;
    flex-direction: column;
    padding: 0; /* Cambiado de 20px a 0 */
    overflow: hidden;
}

.panel-carrito.abierto {
    right: 0;
}

.overlay-carrito {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    display: none;
}

.overlay-carrito.activo {
    display: block;
}

.cabecera-carrito {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid var(--color-gris-muy-clarito);
    flex-shrink: 0;
    /* Añadir estas propiedades para el efecto de sombra */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    background-color: var(--color-fondo);
    position: relative;
    z-index: 2;
}

.cabecera-carrito h2 {
    margin: 0;
    font-size: 1.2em;
}

.cerrar-carrito {
    background: none;
    border: none;
    font-size: 1.5em;
    cursor: pointer;
}

.lista-carrito {
    flex: 1;
    overflow-y: auto;
    padding-left: 15px;
    padding-right: 15px;
    max-height: calc(100vh - 200px); /* Altura máxima */
}

.lista-carrito p {
    color: var(--color-gris-clarito);
    padding: 15px;
}

.item-carrito {
    display: flex;
    align-items: flex-start;
    padding: 12px 0;
    border-bottom: 1px solid var(--color-gris-muy-muy-clarito);
    position: relative;
}

.info-item {
    flex: 1;
    padding-right: 10px;
}

.info-item h4 {
    margin: 0 0 5px 0;
    font-size: 0.9em;
    line-height: 1.3;
}

.info-item p {
    margin: 0;
    font-size: 0.8em;
    color: var(--color-gris-clarito);
}

.controles-item {
    display: flex;
    align-items: center;
    flex-shrink: 0;
}

.controles-item button {
    background-color: var(--color-gris-muy-muy-clarito);
    border: none;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-weight: bold;
    font-size: 1em;
    transition: background-color 0.2s;
}

.controles-item button:hover {
    background-color: var(--color-gris-mas-clarito);
}

.controles-item span {
    margin: 0 12px;
    min-width: 20px;
    text-align: center;
    font-weight: bold;
}

.imagen-item-carrito {
    width: 65px;
    height: 65px;
    margin-right: 10px;
    flex-shrink: 0;
    align-self: center;
}

.imagen-item-carrito img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
}

.resumen-carrito {
    border-top: 1px solid var(--color-gris-muy-clarito);
    padding: 15px 0;
    flex-shrink: 0;
    background-color: var(--color-fondo);
    margin-top: auto; /* Empuja el resumen hacia abajo */
}

.resumen-carrito {
    border-top: 1px solid var(--color-gris-muy-clarito);
    padding: 15px;
    flex-shrink: 0;
    background-color: var(--color-fondo);
    margin-top: auto;
    /* Añadir estas propiedades para el efecto de sombra */
    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 2;
}

.total {
    font-weight: bold;
    font-size: 1.1em;
    border-top: 1px solid var(--color-gris-muy-clarito);
    padding-top: 10px;
    margin-top: 10px;
}

.boton-enviar {
    background: linear-gradient(45deg, 
                #f09433 0%, 
                #e6683c 25%, 
                #dc2743 50%, 
                #cc2366 75%, 
                #bc1888 100%);
    color: white;
    border: none;
    padding: 15px;
    border-radius: 8px;
    width: 100%;
    margin-top: 15px;
    cursor: pointer;
    font-weight: bold;
    font-size: 1em;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.boton-enviar:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    background: linear-gradient(45deg, 
                #ffa64d 0%, 
                #ff7a5c 25%, 
                #ff3b5f 50%, 
                #e62e7b 75%, 
                #d4269a 100%);
}

.boton-enviar:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.boton-agregar {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    background: var(--color-gris-clarito-whatsapp);
    color: black;
    border: none;
    width: 24px;
    height: 24px;
    border-radius: 15%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-size: 1em;
    font-weight: bold;
    opacity: 0.9;
    transition: all 0.3s ease;
    z-index: 10;
}

.boton-agregar:hover {
    opacity: 1;
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 5px 10px rgba(32, 120, 255, 0.4);
    background: linear-gradient(135deg, #64b5ff 0%, #1afbff 50%, #4a8ae4 100%);
}

.boton-agregar:active {
    transform: translateY(-50%) scale(0.95);
    box-shadow: 0 2px 4px rgba(32, 120, 255, 0.2);
}

.producto-thumbnail:hover {
    opacity: 1;
    transform: scale(1.1);
}

.producto-item.sin-stock .boton-agregar {
    display: none;
}

.contenido-carrito {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.info-total {
    display: flex;
    justify-content: space-between;
    margin: 5px 0;
}

/* === NUEVOS ESTILOS PARA EL CARRITO === */
.contenido-item-carrito {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.titulo-item-carrito p {
    margin: 0 0 7px 0;
    padding: 0;
    font-size: 0.85em;
    font-weight: bold;
    color: var(--color-casi-negro);
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.controles-precio-item-carrito {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 7px;
}

.controles-unidad-item-carrito {
    display: flex;
    align-items: center;
    gap: 4px;
}

.controles-unidad-item-carrito button {
    background-color: var(--color-gris-muy-muy-clarito);
    border: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    font-weight: bold;
    font-size: 1em;
    transition: background-color 0.2s;
}

.controles-unidad-item-carrito button:hover {
    background-color: var(--color-gris-mas-clarito);
}

.unidad-item-carrito {
    font-size: 0.85em;
    color: var(--color-gris-clarito);
    min-width: 60px;
    text-align: center;
}

.precio-item-carrito {
    align-self: flex-end;
    font-size: 0.9em;
    color: var(--color-casi-negro);
}